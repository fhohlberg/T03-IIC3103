(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,a){},106:function(e,t,a){},341:function(e,t){},344:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(94),s=a.n(c),l=(a(104),a(5)),o=a(6),i=a(8),u=a(7),m=a(9),d=a(25),h=(a(106),a(108),a(41)),p=a(55),v=a(95),k=a.n(v),E=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).getStockValueColor=function(e){return e.current_value<e.history.slice(-2)[0].value?"red":e.current_value>e.history.slice(-2)[0].value?"green":null},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props.stock_data.history;return r.a.createElement("tr",{className:this.props.stock_data.is_selected?"selected":null,id:this.props.stock_name,onClick:this.props.toggleStockSelection.bind(this,this.props.stock_name)},r.a.createElement("td",null,this.props.stock_name.toUpperCase()),r.a.createElement("td",null,this.props.stock_data.volumen_buy+this.props.stock_data.volumen_sell),r.a.createElement("td",null,this.props.stock_data.min),r.a.createElement("td",null,this.props.stock_data.max),r.a.createElement("td",{className:this.getStockValueColor(this.props.stock_data)},this.props.stock_data.current_value.toFixed(2)),r.a.createElement("td",{className:this.getStockValueColor(this.props.stock_data)},this.props.stock_data.change.toFixed(2)),r.a.createElement("td",null,r.a.createElement(p.Sparklines,{data:e.map(function(e){return e.value})},r.a.createElement(p.SparklinesLine,{color:"blue"}))),r.a.createElement("td",{className:"updated_at"},r.a.createElement(k.a,{date:e.slice(-1)[0].time})))}}]),t}(r.a.Component),g=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(c)))).getArrow=function(){return"up"===a.props.current_trend?r.a.createElement("span",{className:"up-arrow"},"\u21e7"):"down"===a.props.current_trend?r.a.createElement("span",{className:"down-arrow"},"\u21e9"):"-"},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("span",{title:"Market trend",className:"icon market-trend"},this.getArrow())}}]),t}(r.a.Component),b=function(e){return r.a.createElement("div",{className:"card column",id:"stocks_list"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-header-title"},"Stocks \xa0",r.a.createElement(h.Detector,{render:function(e){var t=e.online;return r.a.createElement("span",{className:t?"tag is-success":"tag is-danger"},t?"Live":"Offline")}}),"\xa0")),r.a.createElement("div",{className:"card-content"},e.areStocksLoaded()?r.a.createElement("p",{className:"is-size-7 has-text-info"},"Seleccione una o varios stocks para mostrar."):null,r.a.createElement("br",null),r.a.createElement("table",{className:"table is-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Thicker"),r.a.createElement("th",null,"Volumen"),r.a.createElement("th",null,"Bajo Hist\xf3rico"),r.a.createElement("th",null,"Alto Hist\xf3rico"),r.a.createElement("th",null,"\xdaltimo Valor",r.a.createElement(g,{current_trend:e.market_trend})),r.a.createElement("th",null,"% Variaci\xf3n"),r.a.createElement("th",null,"Historial"),r.a.createElement("th",null,"Tiempo"))),r.a.createElement("tbody",null,Object.keys(e.stocks).map(function(t,a){var n=e.stocks[t];return r.a.createElement(E,{key:a,stock_name:t,stock_data:n,toggleStockSelection:e.toggleStockSelection})}),e.areStocksLoaded()?null:r.a.createElement("tr",null,r.a.createElement("td",{colSpan:"4"},"No hay stocks todav\xeda!"))))))},f=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("tr",null,r.a.createElement("td",null,this.props.exchange_name.toUpperCase()),r.a.createElement("td",null,this.props.exchange_data.volumen_buy),r.a.createElement("td",null,this.props.exchange_data.volumen_sell),r.a.createElement("td",null,this.props.exchange_data.volumen_sell+this.props.exchange_data.volumen_buy),r.a.createElement("td",null,this.props.exchange_data.listed_companies.length),r.a.createElement("td",null,this.props.exchange_data.participacion.toFixed(2)))}}]),t}(r.a.Component),_=function(e){return r.a.createElement("div",{className:"card column",id:"exchange_list"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-header-title"},"Exchanges \xa0",r.a.createElement(h.Detector,{render:function(e){var t=e.online;return r.a.createElement("span",{className:t?"tag is-success":"tag is-danger"},t?"Live":"Offline")}}),"\xa0")),r.a.createElement("div",{className:"card-content"},r.a.createElement("table",{className:"table is-bordered"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Thicker"),r.a.createElement("th",null,"Volumen Compra"),r.a.createElement("th",null,"Volumen Venta"),r.a.createElement("th",null,"Volumen Total"),r.a.createElement("th",null,"Cantidad Acciones"),r.a.createElement("th",null,"Participaci\xf3n mercado"))),r.a.createElement("tbody",null,Object.keys(e.exchanges).map(function(t,a){var n=e.exchanges[t];return r.a.createElement(f,{key:a,exchange_name:t,exchange_data:n})})))))},S=a(96),N={responsive:!0,scales:{xAxes:[{type:"time",distribution:"linear",ticks:{source:"auto"},time:{displayFormats:{second:"h:mm:ss a"},unit:"second"},scaleLabel:{display:!0,labelString:"Tiempo"}}],yAxes:[{ticks:{beginAtZero:!0,stepValue:10,steps:10},scaleLabel:{display:!0,labelString:"Precio (USD$)"}}]},pan:{enabled:!0,mode:"x"},zoom:{enabled:!0,drag:!1,mode:"x"}},y=["rgb(244, 67, 54)","rgb(76, 175, 80)","rgb(63, 81, 181)","rgb(255, 152, 0)","rgb(33, 150, 243)","rgb(139, 195, 74)","rgb(255, 87, 34)","rgb(121, 85, 72)","rgb(233, 30, 99)","rgb(205, 220, 57)","rgb(156, 39, 176)","rgb(255, 235, 59)","rgb(158, 158, 158)","rgb(103, 58, 183)","rgb(0, 150, 136)","rgb(255, 193, 7)","rgb(96, 125, 139)","rgb(33, 33, 33)","rgb(169, 4, 4)","rgb(1, 74, 64)","rgb(179, 3, 72)","rgb(84, 58, 68)"],O=function(e,t,a){return{label:e.toUpperCase(),fill:!1,lineTension:0,backgroundColor:t,borderColor:t,borderCapStyle:"butt",borderJoinStyle:"miter",pointBorderColor:t,pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:t,pointHoverBorderColor:t,pointHoverBorderWidth:2,pointRadius:3,pointHitRadius:10,data:a}},x=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).updateChart=function(){var e=a.refs.chart.chartInstance;if(0===Object.keys(a.props.stocks).length)return e.data.datasets=[],e.update();Object.keys(a.props.stocks).map(function(t,n){var r=a.props.stocks[t],c=e.data.datasets.find(function(e){return e.label===t.toUpperCase()});if(r.is_selected){var s=a.props.stocks[t];c?c.data=a.getStockValues(s):s&&(e.data.datasets=e.data.datasets.concat([O(t,y[n],a.getStockValues(s))]))}else c&&e.data.datasets.splice(e.data.datasets.indexOf(c),1);e.update()})},a.componentDidUpdate=function(){a.updateChart()},a.getStockValues=function(e){return e.history.map(function(e){return{t:new Date(e.time),y:e.value}})},a.resetZoom=function(){a.refs.chart.chartInstance.resetZoom()},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"card column"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-header-title"},"Gr\xe1fico Precio vs. Tiempo")),r.a.createElement("div",{className:"card-content"},r.a.createElement("p",{className:"is-size-7 has-text-info"},this.refs.chart&&this.refs.chart.chartInstance.data.datasets.length>0?"":"Seleccione alguna stock para mostrar en el gr\xe1fico.",r.a.createElement("br",null)),r.a.createElement("button",{className:"button is-small is-pulled-right",onClick:this.resetZoom},"Resetear Zoom"),r.a.createElement(S.a,{data:{datasets:[]},options:N,ref:"chart"})))}}]),t}(r.a.Component),C=function(e){return e.connectionError?r.a.createElement("div",{className:"is-medium"},r.a.createElement("span",{className:"has-text-danger"},"No se han recibido datos. "),r.a.createElement("br",null),"(Vuelva despu\xe9s? :-))"):r.a.createElement("div",{className:"tag is-large is-success"},r.a.createElement("span",{className:"loader"}," \xa0"),"\xa0 \xa0 Cargando stocks..")},w=a(98),j=a.n(w),V=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).saveNewStockValues=function(e){a.props.hideSpinner();var t=e,n=0,r=0,c=a.state.stocks;a.state.stocks[t.ticker]?(c[t.ticker].current_value>Number(t.value)?n++:r++,c[t.ticker].change=(Number(t.value)-c[t.ticker].current_value)/c[t.ticker].current_value*100,c[t.ticker].current_value=Number(t.value),c[t.ticker].history.push({time:t.time,value:Number(t.value)}),(c[t.ticker].min>Number(t.value)||null==c[t.ticker].min)&&(c[t.ticker].min=Number(t.value)),c[t.ticker].max<Number(t.value)&&(c[t.ticker].max=Number(t.value))):c[t.ticker]={current_value:t.value,volumen_buy:0,volumen_sell:0,history:[{time:t.time,value:Number(t.value)}],min:Number(t.value),max:Number(t.value),change:0,is_selected:!1},a.setState({stocks:c,market_trend:a.newMarketTrend(n,r)})},a.saveNewBuyValues=function(e){a.props.hideSpinner();var t=e,n=a.state.stocks,r=a.state.exchanges;if(a.state.stocks[t.ticker])for(var c in n[t.ticker].volumen_buy+=t.volume,a.state.exchanges)a.state.exchanges[c].listed_companies.indexOf(a.state.all_stocks[t.ticker].company_name)>-1&&(r[c].volumen_buy+=t.volume);a.setState({stocks:n,exchanges:r}),a.saveNewExchangeVolume()},a.saveNewSellValues=function(e){a.props.hideSpinner();var t=e,n=a.state.stocks,r=a.state.exchanges;if(a.state.stocks[t.ticker])for(var c in n[t.ticker].volumen_sell+=t.volume,a.state.exchanges)a.state.exchanges[c].listed_companies.indexOf(a.state.all_stocks[t.ticker].company_name)>-1&&(r[c].volumen_sell+=t.volume);a.setState({stocks:n,exchanges:r}),a.saveNewExchangeVolume()},a.saveNewExchangeVolume=function(){var e=a.state.exchanges,t=0;for(var n in a.state.exchanges)e.hasOwnProperty(n)&&(t+=e[n].volumen_sell+e[n].volumen_buy);for(var n in a.state.exchanges)e.hasOwnProperty(n)&&(e[n].participacion=(e[n].volumen_sell+e[n].volumen_buy)/t*100);a.setState({exchanges:e})},a.saveNewExchangeValues=function(e){var t=e,n=a.state.exchanges;for(var r in t)n.hasOwnProperty(r)||(n[r]={name:t[r].name,listed_companies:t[r].listed_companies,volumen_sell:0,volumen_buy:0,participacion:0});a.setState({exchanges:n})},a.saveAllStockValues=function(e){var t=e,n=a.state.all_stocks;t.map(function(e){n[e.ticker]={company_name:e.company_name,quote_base:e.quote_base}}),a.setState({all_stocks:n})},a.newMarketTrend=function(e,t){if(e!==t)return e>t?"up":"down"},a.toggleStockSelection=function(e){var t=a.state.stocks;t[e].is_selected=!t[e].is_selected,a.setState({stocks:t})},a.areStocksLoaded=function(){return Object.keys(a.state.stocks).length>0},a.state={all_stocks:{},stocks:{},exchanges:{},market_trend:void 0,connectionError:!1,isToggleOn:!0},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.hideSpinner();var t=j()("wss://le-18262636.bitzonte.com",{path:"/stocks"});t.emit("STOCKS",function(e){}),t.on("STOCKS",function(t){e.saveAllStockValues(t)}),t.on("UPDATE",function(t){return e.saveNewStockValues(t)}),t.on("BUY",function(t){return e.saveNewBuyValues(t)}),t.on("SELL",function(t){return e.saveNewSellValues(t)}),t.emit("EXCHANGES",function(e){}),t.on("EXCHANGES",function(t){e.saveNewExchangeValues(t)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("div",{className:"rows"},r.a.createElement(_,{exchanges:this.state.exchanges}),r.a.createElement("br",null),r.a.createElement(b,{stocks:this.state.stocks,toggleStockSelection:this.toggleStockSelection,resetData:this.resetData,market_trend:this.state.market_trend,areStocksLoaded:this.areStocksLoaded}),r.a.createElement("br",null),r.a.createElement(x,{stocks:this.state.stocks})),r.a.createElement("div",{className:this.props.showSpinner?"modal is-active":"modal"},r.a.createElement("div",{className:"modal-background"}),r.a.createElement("div",{className:"modal-content"},r.a.createElement(C,{connectionError:this.state.connectionError}))))}}]),t}(r.a.Component),T=function(e){return r.a.createElement("div",{className:"container stocks-loader"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"card-header-icon"},r.a.createElement("span",{className:"loader"})),r.a.createElement("div",{className:"card-header-title"},"Loading...")),r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-content"},"Debes hacer click en \xa0",r.a.createElement("code",null,'"Load Unsafe Scripts"'),"\xa0 para proceder.")))},A=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(i.a)(this,Object(u.a)(t).call(this))).state={hasError:!1,showSpinner:!0},e.hideSpinner=function(){e.setState({showSpinner:!1})},e.handleClick=e.handleClick.bind(Object(d.a)(Object(d.a)(e))),e}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidCatch",value:function(e,t){console.log(e,t)}},{key:"handleClick",value:function(){this.setState(function(e){return{isToggleOn:!e.isToggleOn}})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement(T,null):this.state.isToggleOn?r.a.createElement("div",{className:"container",style:{textAlign:"center"}},r.a.createElement("br",null),r.a.createElement("div",{className:"container"},r.a.createElement("br",null),r.a.createElement("button",{onClick:this.handleClick},this.state.isToggleOn?"CONECTAR SOCKET":"DESCONECTAR SOCKET"),r.a.createElement("br",null))):r.a.createElement("div",{className:"container",style:{textAlign:"center"}},r.a.createElement("br",null),r.a.createElement("button",{onClick:this.handleClick},this.state.isToggleOn?"CONECTAR SOCKET":"DESCONECTAR SOCKET"),r.a.createElement(V,{hideSpinner:this.hideSpinner,showSpinner:this.state.showSpinner}))}}],[{key:"getDerivedStateFromError",value:function(e){return console.log("Ocurri\xf3 alg\xfan error"),{hasError:!0}}}]),t}(n.Component);s.a.render(r.a.createElement(A,null),document.getElementById("root"))},99:function(e,t,a){e.exports=a(344)}},[[99,2,1]]]);
//# sourceMappingURL=main.744cca5a.chunk.js.map